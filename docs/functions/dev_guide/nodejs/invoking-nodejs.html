<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled :: Red Hat OpenShift Serverless previews</title>
    <link rel="canonical" href="https://openshift-knative.github.io/docs/docs/functions/dev_guide/nodejs/invoking-nodejs.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../../_/css/site.css">
<link rel="stylesheet" href="../../../../_/css/extra.css">
<link rel="stylesheet" href="../../../../_/font-awesome-4.7.0/css/font-awesome.min.css">
<!--
<link rel="icon" href="../../../../favicon.ico" type="image/x-icon">
-->
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <button class="navbar-burger" data-target="topbar-nav">
          <span></span>
          <span></span>
          <span></span>
        </button>
        <img src="../../../../_/img/serverless-icon.svg" class="navbar-logo" alt="OpenShift Serverless icon">
        <a href="">OpenShift Serverless Previews</a>
      </div>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <!-- search broken
        <div class="navbar-item hide-for-print">
          <script async src="https://cse.google.com/cse.js?cx=002898025167115630151:gnr5edrg2eo"></script>
          <div class="gcse-searchbox" enableAutoComplete="true"></div>
        </div>
      -->
        <a class="navbar-item" href="https://openshift-knative.github.io/docs/docs/index.html">Home</a>
        <a class="navbar-item" href="https://developers.redhat.com/topics/serverless-architecture">Blog</a>
        <a class="navbar-item" href="https://github.com/boson-project/">The Boson Project</a>
      </div>
    </div>
  </nav>
<!-- need alt search type-->
<!--<div class="gcse-searchresults"></div>-->
</header>
<div class="main-wrapper">
  <div class="navigation-container" data-component="docs" data-version="master">
  <aside class="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../../index.html">Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Functions</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../about-functions.html">About Functions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../quickstart-functions.html">Quick start</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Concepts</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../concepts/event-workflows.html">Event workflows</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">CLI reference guide</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_guide/kn-func-list-all-commands.html">Listing available kn func commands</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_guide/create-function-kn.html">Creating functions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_guide/build-function-kn.html">Building a function</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_guide/deploy-function-kn.html">Deploying functions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_guide/functions-list-kn.html">Listing existing functions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_guide/describe-function-kn.html">Describing a function</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_guide/delete-function-kn.html">Deleting a function</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../functions-cli.html">CLI flags</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Developer guide</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="develop-nodejs.html">Developing Node.js functions</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="context-obj-reference.html">Context object reference guide</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../go/develop-go.html">Developing Go functions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../python/develop-python.html">Developing Python functions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../quarkus/develop-quarkus.html">Developing Quarkus functions</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Administration guide</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../admin_guide/tracing-functions.html">Tracing function requests</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">Documentation</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Documentation</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <div class="main-view-and-toolbar">
    <div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="../../../index.html" class="home-link"></a>
<nav class="crumbs" aria-label="breadcrumbs">
</nav>
</div>
    <div class="main-view-and-toc">
        <main class="main">
          <article class="doc">
<div class="paragraph">
<p>Node.js functions can be invoked with a simple HTTP request. When an incoming request is received, functions are invoked with a <code>context</code> object as the first parameter.</p>
</div>
<div class="sect1">
<h2 id="_context_objects"><a class="anchor" href="#_context_objects"></a>Context objects</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Functions are invoked by providing a <code>context</code> object as the first parameter.</p>
</div>
<div class="listingblock">
<div class="title">Example context object</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">function processPurchase(context, data)</code></pre>
</div>
</div>
<div class="paragraph">
<p>This object provides access to the incoming HTTP request information, including the HTTP request method, any query strings or headers sent with the request, the HTTP version, and the request body.</p>
</div>
<div class="paragraph">
<p>Incoming requests that contain a CloudEvent attach the incoming instance of the CloudEvent to the context object, so that it can be accessed using <code>context.cloudevent</code>.</p>
</div>
<div class="sect2">
<h3 id="_context_object_methods"><a class="anchor" href="#_context_object_methods"></a>Context object methods</h3>
<div class="paragraph">
<p>The <code>context</code> object has a single method, <code>cloudEventResponse()</code> that accepts a data value and returns a CloudEvent.</p>
</div>
<div class="paragraph">
<p>In a Knative system, if a function deployed as a service is invoked by an event broker sending a CloudEvent, the broker will examine the response. If the response is a CloudEvent, this event will then be handled by the broker.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">// Expects to receive a CloudEvent with customer data
function processCustomer(context, customer) {
  // process the customer
  const processed = processCustomer(customer);
  return context.cloudEventResponse(customer);
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cloudevent_data"><a class="anchor" href="#_cloudevent_data"></a>CloudEvent data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If the incoming request is a CloudEvent, any data associated with the CloudEvent is extracted from the event and provided as a second parameter. For example, if a CloudEvent is received which contains a JSON string similar to the following in its data property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "customerId": "0123456",
  "productId": "6543210"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When invoked, the second parameter to the function, after the <code>context</code> object, will be a JavaScript object that has <code>customerId</code> and <code>productId</code> properties.</p>
</div>
<div class="listingblock">
<div class="title">Example signature</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function processPurchase(context, data)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>data</code> parameter in this example is a JavaScript object that contains the <code>customerId</code> and <code>productId</code> properties.</p>
</div>
</div>
</div>
</article>
        </main>
            </div>
  </div>
</div><footer class="footer">
  <p>Adapted from Antora default UI, (c) 2019</p>
</footer>
<script src="../../../../_/js/site.js"></script>
<script src="../../../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
  </body>
</html>
